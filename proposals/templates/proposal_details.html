{% extends "main.html" %}

{% block title %}
{{ proposal.title }}
{% endblock %}

{% block content %}

<h1>{{ proposal.title }}</h1>

<p>Category: {{ proposal.category }}</p>
<p>Status: {{ proposal.status }}</p>
<p>Submitted on: {{ proposal.datetime }}</p>
<p>Content: {{ proposal.content }}</p>

<p>Upvotes: {{ upvote_count }}</p>

<form action="{% url 'upvote_proposal' proposal.id %}" method="post">
    {% csrf_token %}
    <button type="submit">Upvote</button>
</form>

{% if error_message %}
    <p style="color: red;">{{ error_message }}</p>
{% endif %}

<h2>Comments</h2>
{% for comment in comments %}
    <div>
        <p>{{ comment.author }} commented:</p>
        <p>{{ comment.text }}</p>
    </div>
{% endfor %}

<h2>Leave a comment</h2>

<form method="post">
    {% csrf_token %}
    <p>Author:<br><input type="text" name="Author" /></p>
    <p>Proposal:<br><textarea name="Text"></textarea></p>
    <input type="submit" value="Submit" />
</form>

<p><a href="{% url 'proposals' %}">Back to all proposals</a></p>

{% endblock %}
